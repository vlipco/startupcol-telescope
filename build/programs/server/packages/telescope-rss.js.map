{"version":3,"file":"/packages/telescope-rss.js","sources":["telescope-rss/lib/server/rss.js","telescope-rss/lib/server/routes.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uB;AACA,sB;AACA,+B;AACA,uC;AACA,8C;AACA,mC;AACA,sD;AACA,K;AACA,E;AACA,mG;AACA,e;AACA,uB;AACA,6F;AACA,yB;AACA,yB;AACA,4B;AACA,mB;AACA,O;AACA,K;AACA,E;AACA,oB;AACA,E;;;;;;;;;;;;;;;;;;;ACrBA,4B;;AAEA,yB;;AAEA,U;;AAEA,wB;AACA,sB;AACA,wB;AACA,0B;AACA,wC;AACA,4B;AACA,O;AACA,O;;AAEA,K;;AAEA,G","sourcesContent":["serveRSS = function() {\n  var feed = new RSS({\n    title: getSetting('title'),\n    description: getSetting('tagline'),\n    feed_url: Meteor.absoluteUrl()+'feed.xml',\n    site_url: Meteor.absoluteUrl(),\n    image_url: Meteor.absoluteUrl()+'img/favicon.png',\n  });\n  \n  Posts.find({status: STATUS_APPROVED}, {sort: {postedAt: -1}, limit: 20}).forEach(function(post) {\n    feed.item({\n     title: post.title,\n     description: post.body+'</br></br> <a href=\"'+getPostPageUrl(post._id)+'\">Comments</a>',\n     author: post.author,\n     date: post.postedAt,\n     url: getPostLink(post),\n     guid: post._id\n    });\n  });\n  \n  return feed.xml();\n};\n","Meteor.startup(function () {\n\n  Router.map(function() {\n\n    // RSS\n\n    this.route('feed', {\n      where: 'server',\n      path: '/feed.xml',\n      action: function() {\n        this.response.write(serveRSS());\n        this.response.end();\n      }\n    });\n\n  });\n\n});"]}